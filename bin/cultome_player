#!/usr/bin/env jruby
# encoding: utf-8

puts "Loading CulToMe Player..."

require 'cultome/helper'
require 'cultome/version'
require 'colorize'

include Helper

if os == :windows
	system("cls") 
	puts "Starting CulToMe Player v#{CultomePlayer::VERSION}"
elsif os != :windows
	system("clear") 
	print "Starting CulToMe Player ".light_yellow
	puts "v#{CultomePlayer::VERSION}".light_blue
end

require 'text_slider'
include TextSlider

if os != :windows
	p = 'ᗧ'.yellow
	m = 'ᗤ'.yellow
	l = 'ᗣ'.light_yellow
	b = 'ᗣ'.light_red
	r = 'ᗣ'.red
	c = 'ᗣ'.cyan
	h = 'ᗣ'.white
	y = 'ᗣ'.light_blue
	o = 'ʘ'.yellow
	i = '• '.yellow
else
	p = '<'
	m = '>'
	l = '^'
	b = '^'
	r = '^'
	c = '^'
	h = '^'
	y = '^'
	o = 'O'
	i = '. '
end

seq = [
" #{i * 14}#{o}",
" #{i * 14}#{o}",
"#{p}#{(i * 14)}#{o}",
" #{p} #{(i * 13)}#{o}",
"  #{p}#{(i * 13)}#{o}",
"   #{p} #{(i * 12)}#{o}",
"    #{p}#{(i * 12)}#{o}",
"     #{p} #{(i * 11)}#{o}",
"      #{p}#{(i * 11)}#{o}",
"       #{p} #{(i * 10)}#{o}",
"        #{p}#{(i * 10)}#{o}",
"  #{b}      #{p} #{(i * 9)}#{o}",
"#{l}  #{b}      #{p}#{(i * 9)}#{o}",
" #{l}  #{b}      #{p} #{(i * 8)}#{o}",
"  #{l}  #{b}      #{p}#{(i * 8)}#{o}",
"#{r}  #{l}  #{b}      #{p} #{(i * 7)}#{o}",
" #{r}  #{l}  #{b}      #{p}#{(i * 7)}#{o}",
"  #{r}  #{l}  #{b}      #{p} #{(i * 6)}#{o}",
"#{c}  #{r}  #{l}  #{b}      #{p}#{(i * 6)}#{o}",
" #{c}  #{r}  #{l}  #{b}      #{p} #{(i * 5)}#{o}",
"  #{c}  #{r}  #{l}  #{b}      #{p}#{(i * 5)}#{o}",
"   #{c}  #{r}  #{l}  #{b}      #{p} #{(i * 4)}#{o}",
"    #{c}  #{r}  #{l}  #{b}      #{p}#{(i * 4)}#{o}",
"     #{c}  #{r}  #{l}  #{b}      #{p} #{(i * 3)}#{o}",
"      #{c}  #{r}  #{l}  #{b}      #{p}#{(i * 3)}#{o}",
"       #{c}  #{r}  #{l}  #{b}      #{p} #{(i * 2)}#{o}",
"        #{c}  #{r}  #{l}  #{b}      #{p}#{(i * 2)}#{o}",
"         #{c}  #{r}  #{l}  #{b}      #{p} #{(i * 1)}#{o}",
"          #{c}  #{r}  #{l}  #{b}      #{p}#{(i * 1)}#{o}",
"           #{c}  #{r}  #{l}  #{b}      #{p} #{o}",
"            #{c}  #{r}  #{l}  #{b}      ᗧʘ",
"             #{h}  #{h}  #{h}  #{h}      #{m}",
"            #{h}  #{h}  #{h}  #{h}     #{m}  ",
"           #{y}  #{y}  #{y}  #{y}    #{m}    ",
"          #{y}  #{y}  #{y}  #{y}   #{m}      ",
"         #{h}  #{h}  #{h}  #{h}  #{m}        ",
"        #{h}  #{h}  #{h}  #{h} #{m}          ",
"       #{y}  #{y}  #{y}  ᗣᗤ            ",
"      #{y}  #{y}  #{y}  #{m}              ",
"     #{h}  #{h}  #{h} #{m}                ",
"    #{h}  #{h}  ᗣᗤ                  ",
"   #{y}  #{y}  #{m}                    ",
"  #{y}  #{y} #{m}                      ",
" #{h}  ᗣᗤ                        ",
"#{h}  #{m}                          ",
" #{m}                           #{y}",
"                            #{y} ",
"                           #{h}  ",
"                          #{h}   ",
"                         #{y}    ",
"                        #{y}    #{m}",
"                       #{h}   #{m} #{o}",
"                      #{h}  #{m} #{(i * 1)}#{o}",
"                     #{y} #{m} #{(i * 2)}#{o}",
"                    ᗣᗤ #{(i * 3)}#{o}",
"                   #{m} #{(i * 4)}#{o}",
"                 #{m} #{(i * 5)}#{o}",
"               #{m} #{(i * 6)}#{o}",
"             #{m} #{(i * 7)}#{o}",
"           #{m} #{(i * 8)}#{o}",
"         #{m} #{(i * 9)}#{o}",
"       #{m} #{(i * 10)}#{o}",
"     #{m} #{(i * 11)}#{o}",
"   #{m} #{(i * 12)}#{o}",
" #{m} #{(i * 13)}#{o}",
" #{i * 14}#{o}",
]

thrd = roll_sequence(seq, {
	width: 30, 
	add_repeat_transition: false, 
	background: true, 
	clean_on_finish: false,
	repeat: true,
	tick: 0.1,
})

# cargamos la paleta de colores
define_color_palette

# cargamos el reproductor completo
require 'cultome_player'
#require 'cultome/core'
player = Cultome::CultomePlayer.new
player.check_full_integrity
#player.load_commands
player.generate_help

# detenemos la animacion
thrd.kill
thrd.join
print "#{' ' * seq[0].length}\r"

# iniciamos el reproductor
player.start

puts "Bye!".blue

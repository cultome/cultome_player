#!/usr/bin/env jruby
# encoding: utf-8

system("clear")

require 'cultome/version'
require 'colorize'

print "Starting Cultome Player ".light_yellow
puts "v#{CultomePlayer::VERSION}".light_blue

require 'text_slider'
include TextSlider

p = 'ᗧ'.yellow
m = 'ᗤ'.yellow
l = 'ᗣ'.light_yellow
b = 'ᗣ'.light_red
r = 'ᗣ'.red
c = 'ᗣ'.cyan
o = 'ʘ'.yellow

seq = [
" • • • • • • • • • • • • • • #{o}".yellow,
" • • • • • • • • • • • • • • #{o}".yellow,
"#{p}#{"• • • • • • • • • • • • • •".yellow} #{o}",
" #{p} #{"• • • • • • • • • • • • •".yellow} #{o}",
"  #{p}#{"• • • • • • • • • • • • •".yellow} #{o}",
"   #{p} #{"• • • • • • • • • • • •".yellow} #{o}",
"    #{p}#{"• • • • • • • • • • • •".yellow} #{o}",
"     #{p} #{"• • • • • • • • • • •".yellow} #{o}",
"      #{p}#{"• • • • • • • • • • •".yellow} #{o}",
"       #{p} #{"• • • • • • • • • •".yellow} #{o}",
"        #{p}#{"• • • • • • • • • •".yellow} #{o}",
"  #{b}      #{p} #{"• • • • • • • • •".yellow} #{o}",
"#{l}  #{b}      #{p}#{"• • • • • • • • •".yellow} #{o}",
" #{l}  #{b}      #{p} #{"• • • • • • • •".yellow} #{o}",
"  #{l}  #{b}      #{p}#{"• • • • • • • •".yellow} #{o}",
"#{r}  #{l}  #{b}      #{p} #{"• • • • • • •".yellow} #{o}",
" #{r}  #{l}  #{b}      #{p}#{"• • • • • • •".yellow} #{o}",
"  #{r}  #{l}  #{b}      #{p} #{"• • • • • •".yellow} #{o}",
"#{c}  #{r}  #{l}  #{b}      #{p}#{"• • • • • •".yellow} #{o}",
" #{c}  #{r}  #{l}  #{b}      #{p} #{"• • • • •".yellow} #{o}",
"  #{c}  #{r}  #{l}  #{b}      #{p}#{"• • • • •".yellow} #{o}",
"   #{c}  #{r}  #{l}  #{b}      #{p} #{"• • • •".yellow} #{o}",
"    #{c}  #{r}  #{l}  #{b}      #{p}#{"• • • •".yellow} #{o}",
"     #{c}  #{r}  #{l}  #{b}      #{p} #{"• • •".yellow} #{o}",
"      #{c}  #{r}  #{l}  #{b}      #{p}#{"• • •".yellow} #{o}",
"       #{c}  #{r}  #{l}  #{b}      #{p} #{"• •".yellow} #{o}",
"        #{c}  #{r}  #{l}  #{b}      #{p}#{"• •".yellow} #{o}",
"         #{c}  #{r}  #{l}  #{b}      #{p} #{"•".yellow} #{o}",
"          #{c}  #{r}  #{l}  #{b}      #{p}#{"•".yellow} #{o}",
"           #{c}  #{r}  #{l}  #{b}      #{p} #{o}",
"            #{c}  #{r}  #{l}  #{b}      ᗧʘ",
"             #{c}  #{r}  #{l}  #{b}      #{m}",
"            #{c}  #{r}  #{l}  #{b}     #{m}  ",
"           #{c}  #{r}  #{l}  #{b}    #{m}    ",
"          #{c}  #{r}  #{l}  #{b}   #{m}      ",
"         #{c}  #{r}  #{l}  #{b}  #{m}        ",
"        #{c}  #{r}  #{l}  #{b} #{m}          ",
"       #{c}  #{r}  #{l}  ᗣᗤ            ",
"      #{c}  #{r}  #{l}  #{m}              ",
"     #{c}  #{r}  #{l} #{m}                ",
"    #{c}  #{r}  ᗣᗤ                  ",
"   #{c}  #{r}  #{m}                    ",
"  #{c}  #{r} #{m}                      ",
" #{c}  ᗣᗤ                        ",
"#{c}  #{m}                          ",
" #{m}                           #{c}",
"                            #{c} ",
"                           #{c}  ",
"                          #{c}   ",
"                         #{c}    ",
"                        #{c}    #{m}",
"                       #{c}   #{m} #{o}",
"                      #{c}  #{m} #{"•".yellow} #{o}",
"                     #{c} #{m} #{"• •".yellow} #{o}",
"                    ᗣᗤ #{"• • •".yellow} #{o}",
"                   #{m} #{"• • • •".yellow} #{o}",
"                 #{m} #{"• • • • •".yellow} #{o}",
"               #{m} #{"• • • • • •".yellow} #{o}",
"             #{m} #{"• • • • • • •".yellow} #{o}",
"           #{m} #{"• • • • • • • •".yellow} #{o}",
"         #{m} #{"• • • • • • • • •".yellow} #{o}",
"       #{m} #{"• • • • • • • • • •".yellow} #{o}",
"     #{m} #{"• • • • • • • • • • •".yellow} #{o}",
"   #{m} #{"• • • • • • • • • • • •".yellow} #{o}",
" #{m} #{"• • • • • • • • • • • • •".yellow} #{o}",
" • • • • • • • • • • • • • • #{o}".yellow,
]

thrd = roll_sequence(seq, {
	width: 30, 
	add_repeat_transition: false, 
	background: true, 
	clean_on_finish: false,
	repeat: true,
	tick: 0.1,
})

require 'cultome_player'
require 'cultome/core'

player = CultomePlayer.new
player.load_commands

# detenemos la animacion
thrd.kill
thrd.join
print "#{' ' * seq[0].length}\r"

# iniciamos el reproductor
player.start

puts "Bye!".blue
